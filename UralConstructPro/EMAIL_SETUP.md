# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ email

## –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ email —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π email**: Email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–æ–∫ –±–µ—Ä–µ—Ç—Å—è –∏–∑ header `X-Recipient-Email`
- **–î–≤–µ —Ñ–æ—Ä–º—ã**: –§–æ—Ä–º–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Ñ–æ—Ä–º–∞ –≤ modal-content (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è email**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–∞ email
- **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 1 –∑–∞—è–≤–∫–∞ –≤ –º–∏–Ω—É—Ç—É —Å –æ–¥–Ω–æ–≥–æ email/IP
- **–ö—Ä–∞—Å–∏–≤—ã–π HTML —à–∞–±–ª–æ–Ω**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∏—Å–µ–º
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ productTitle**: –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è –≤ –ø–∏—Å—å–º–∞—Ö

## Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `src/mail/email-validation.service.ts` - —Å–µ—Ä–≤–∏—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email –∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞
- `src/migrations/add-product-title.ts` - –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è productTitle

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/applications/dto/create-application.dto.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ productTitle
- `src/applications/application.entity.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ productTitle
- `src/mail/mail.service.ts` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ email –∏ —É–ª—É—á—à–µ–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω
- `src/mail/mail.module.ts` - —ç–∫—Å–ø–æ—Ä—Ç EmailValidationService
- `src/applications/applications.controller.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ header –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `src/applications/applications.service.ts` - –ø–µ—Ä–µ–¥–∞—á–∞ recipientEmail

### 3. API –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### POST /api/applications
–¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç header `X-Recipient-Email` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è email –ø–æ–ª—É—á–∞—Ç–µ–ª—è.

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
X-Recipient-Email: admin@company.com (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com",
  "phone": "+7 (999) 123-45-67",
  "productCategory": "building_frames",
  "productTitle": "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ —Ñ–µ—Ä–º—ã",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
}
```

## Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `src/composables/useEmailConfig.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ email –∞–¥—Ä–µ—Å–æ–º

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/components/Header.vue` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ email –∏–∑ composable
- `src/components/CatalogSection.vue` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email –≤ header
- `src/views/CategoryPage.vue` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email –≤ header –∏ productTitle

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ö

#### –§–æ—Ä–º–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `productTitle` (–Ω–∞–∑–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–∑–¥–µ–ª–∏—è)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –≤ header `X-Recipient-Email`

#### –§–æ—Ä–º–∞ –≤ modal-content
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `productCategory` –∏–∑ URL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `productTitle` –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –≤ header `X-Recipient-Email`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
ADMIN_EMAIL=admin@company.com
```

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è productTitle:
```bash
npm run migration:run
```

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ email –∞–¥—Ä–µ—Å–∞
–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è email –∞–¥—Ä–µ—Å–∞ –≤ header –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª:
`frontend/src/composables/useEmailConfig.ts`

```typescript
const recipientEmail = ref('your-new-email@company.com')
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è email
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç email
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ —á–µ—Ä–µ–∑ DNS MX –∑–∞–ø–∏—Å–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è HTTP 400

### –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 –∑–∞—è–≤–∫–∞ –≤ –º–∏–Ω—É—Ç—É —Å –æ–¥–Ω–æ–≥–æ email –∏–ª–∏ IP
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è HTTP 429
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

### –®–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π HTML –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞
- –≠–º–æ–¥–∑–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ productTitle

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
- Graceful degradation (–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –æ—à–∏–±–∫–µ email)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç —Ñ–æ—Ä–º—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –≤ —Å–µ–∫—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –∏–∑–¥–µ–ª–∏–µ
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Å—å–º–∞

### 2. –¢–µ—Å—Ç —Ñ–æ—Ä–º—ã –≤ modal-content
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–æ–≤–∞—Ä –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Å—å–º–∞

### 3. –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º email
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫ –ø–æ–¥—Ä—è–¥
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- ‚ùå –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ rate limit
